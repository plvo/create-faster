{{!-- @repo:single --}}
import type { InferInsertModel, InferSelectModel } from 'drizzle-orm';
{{#if (eq hasModule "better-auth")}}
import type { postTable, userAccountTable, userSessionTable, userTable, userVerificationTable } from './schema';
{{else}}
import type { postTable, userTable } from './schema';
{{/if}}

// Inferred types from schema
export type User = InferSelectModel<typeof userTable>;
export type NewUser = InferInsertModel<typeof userTable>;

export type Post = InferSelectModel<typeof postTable>;
export type NewPost = InferInsertModel<typeof postTable>;

// Relation types
export type UserWithPosts = User & {
  posts: Post[];
};

export type PostWithAuthor = Post & {
  author: User;
};

{{#if (eq hasModule "better-auth")}}
export type UserWithRelations = User & {
  accounts: UserAccount[];
  sessions: UserSession[];
};

export type UserAccount = InferSelectModel<typeof userAccountTable>;
export type UserSession = InferSelectModel<typeof userSessionTable>;
export type UserVerification = InferSelectModel<typeof userVerificationTable>;
{{/if}}